# 日次振り返り

今日のDay・Week・Monthタスクを分析し、包括的な日次振り返りレポートを生成するコマンドです。

生成したレポートは docs/knowledge/weeks/{{YYYY-MM}}/{{YYYY-MM-DD}}.md に保存します。

## 機能

### 1. 今日のタスク分析
- 今日のDayタスクを取得・分析
- 関連するWeek・Monthタスクとの関連性を確認
- タスクの完了状況と進捗を評価

### 2. 動的データ取得
- Notion MCP APIを使用してリアルタイムデータを取得
- 今日の日付を基準に自動的にフィルタリング
- カテゴリ別（Event/Chat/Review等）の分析

### 3. 包括的レポート生成
- 今日の活動概要
- 完了したタスクの詳細
- 進行中タスクの現状
- 学習・気づきの抽出
- 明日への改善提案

## 実行手順

1. **今日のDayタスクを取得**
   ```javascript
   mcp__notion-mcp__API-post-database-query({
     database_id: "11c95f5706ba4465be05f7951fc80162",
     filter: {
       property: "Date",
       date: { equals: "2025-06-18" }  // 今日の日付
     },
     sorts: [{ property: "Date", direction: "descending" }]
   })
   ```

2. **関連するWeek・Monthタスクを取得**
   - Dayタスクから関連するWeek・Monthタスクのリレーションを辿る
   - 上位タスクの進捗状況を確認

3. **分析・レポート生成**
   - タスクの内容・カテゴリ・完了状況を分析
   - 学習内容や気づきを抽出
   - 改善点・明日のアクションを提案

## 出力フォーマット

```markdown
# 日次振り返り - {日付}

## 📊 今日の活動概要
- 完了タスク: {N}件
- 進行中タスク: {N}件
- 主要カテゴリ: {Event/Chat/Review等}

## ✅ 完了したタスク
{完了したタスクのリストと詳細}

## 🔄 進行中のタスク
{進行中タスクの現状と課題}

## 💡 今日の学習・気づき
{Chatカテゴリや学習関連タスクから抽出}

## 🔗 関連する上位タスク
{WeekやMonthタスクとの関連性}

## 📈 明日への改善提案
{今日の結果を踏まえた具体的な改善案}

## 📚 参考資料
{Referenceプロパティから取得したリンク}
```

## 引数

- 日付指定（オプション）: 特定の日付を指定可能。未指定時は今日の日付を使用

## 使用例

```bash
# 今日の振り返り
claude /project:daily-review

# 特定日の振り返り
claude /project:daily-review 2025-06-17
```

## 特記事項

- NotionのDay・Week・Monthデータベースの階層構造を活用
- MCPツールを使用してリアルタイムデータを取得
- 単なるテンプレートではなく、実際のデータに基づいた分析を提供
- 継続的な改善のための具体的な提案を含む
